---\ntitle: \"How to Create SSH keys with Terraform? | by Alexandre Couëdelo | FAUN Publication\"\ndate: 2022-05-17\ndraft: false\ncategories: [\"Terraform\"]\ntags: [\"SSH\", \"Terraform\", \"GitHub Actions\"]\nimages:\n- https://prod-files-secure.s3.us-west-2.amazonaws.com/bd16a693-0437-45a1-9aec-255351a830a8/bd7f1233-e7ca-477f-8b2e-61f050221db8/0Awoi_2ICuXm2yOY1.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466RRLCXVKV%2F20250312%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250312T101734Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEHIaCXVzLXdlc3QtMiJGMEQCIFg3VsVvlwKG5T6DW6c%2BiGzO%2F4%2FgWXvgmwjgzsV19qcnAiAs0tDa7nFNYcsVReXt5DPXZ49PsSyYlsAB61j6muEsCCqIBAi7%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F8BEAAaDDYzNzQyMzE4MzgwNSIMykJNH0SuBzK%2B8TBFKtwD7sbelPMzFF%2BGEk0csvxYIKWsg21mjU%2Bp9G7S4tRBE8dlSkKIovVecsHzo9FPgfukH%2BsbSZA9zo0Z5P9mSTCtr7LobJNP1TSo232bmSpqG%2BjUave2GPj5Zm%2Bxr%2FJtXsS8lWq0aRjT9uNSCH4qlNGyXrjSIjOwAHZb534ro5XyezgHDCZ0TzVy4h85Dd6AyGVQPG65toCDZAoaKGxHv8nxslb%2BoHT6p2KxLAS47WCPzP4%2FWufn3HSuBoXyJ%2BksDYPxZ8eO5bJbFjEsbwrir7c6gSxXqVFX9NZuAe7f3898GZGV0fPngA8%2BRCG9ZGcoUhRZiPkzydjbr5go60LI9loVtdCC6MUlLQheXVIfWNG4C5GI9lhzZjnVpAjU26swnQEbV%2FeQ748LjLTypJf8%2FEf5%2BFqE3Acwkrn0Pw%2FFMWfLw3GaeFyZ%2F%2BpqupomhT0Osgy6t%2FnXy%2Bxu7IkmsHWz8XvfXivVz9%2FoEhXo6sTFFYULN1Gg2SWVm2UoKdxoVNgx3bj4VG4y%2BIOIoSxSEO3R%2BEd%2B%2B2JuR82ckRfmDmzta8elyE55L5A8Rml4ejX9%2FUhCbH1DpmT4ed5B%2BU1D5rRPfh3rVrbz%2F%2FDKQJLoFHgCMgYLqW5HTLRh1l%2BJtXB7Qzswhr7FvgY6pgEFxr9FyzAlJQnJ80Hk5FRd9ziVhtTyTYGdFzZ3VSO93rExyk%2FG1adUNSxy7r3%2Bhe3WRuyTY%2FUUt8aYR9cZEYBUk46TCBj3yJV%2Fml6YYJM1%2BAety0SOjqH3oSc4eapnSlqiDWHi4Yze2FYopYkPpYMSbRMm1OplpQA0arKzB8GuwPNbJfPr943uMx%2FMEjX5Nd6XTEVVNm2vUNT3zLSYIwJoOTDafW7lq&X-Amz-Signature=fa013e504757809bcfc71caaf62b26e282c9e421cd35c5d1caa20b72513c1a53&X-Amz-SignedHeaders=host&x-id=GetObject\n---\n\n> Original Article : [Original Article](https://faun.pub/how-to-create-ssh-keys-with-terraform-a615dfc631c1)\n\n## Summary\n\nThis article guides you through generating **SSH key pairs** using **Terraform** and integrating them with **GitHub Actions** to securely connect to your server. I will provide step-by-step instructions for provisioning a VM, securely managing **SSH keys**, and configuring the necessary secrets in GitHub for seamless integration.\n\n## Creating SSH keys with Terraform\n\nGenerating an **SSH key pair** with Terraform is straightforward using the Hashicorp TLS provider. This provider supports various encryption schemes. However, be mindful that the public/private key pair remains unencrypted in the Terraform state, so using secure remote state storage like **Terraform Cloud** is crucial. For large-scale production setups, it’s recommended to manage SSH keys outside of Terraform.\n\n## Supplying Private SSH to Github Action\n\nTo connect to your server via GitHub Actions, you’ll need to define two secrets: ${{ secrets.SSH_KEY }} (the private SSH key for login) and ${{ secrets.KNOWN_HOSTS }} (to verify the server’s identity). The article references an article to understand **known\_host**\n\nIt is an important security feature that often gets deactivated by people not understanding its purpose. But no worries you will also provide this using Terraform.\n\n\n## Conclusion\n\nI provided a setup using Terraform to provision your server the IaC way. Securing SSH config right and do not skip the known\_host validate.\n\nThis article is part of a bigger project about using Terraform, Ansible, and GitHub for small self-hosted projects by answering questions along these lines:\n\n## Reference\n\n*   [How to configure GitHub Environments with Terraform?]\n*   [How to provision VM on digitalocean with Terraform?]\n*   [How to create SSH keys with Terraform?]\n*   [How to create Ansible Inventory with Terraform?]\n*   [How to run an Ansible playbook using GitHub Action?]\n\n![Alt Text](https://prod-files-secure.s3.us-west-2.amazonaws.com/bd16a693-0437-45a1-9aec-255351a830a8/9c3ec5c6-1099-4c1e-af14-0ff9fcebb09a/0-JrS0PbEOZ7L5r-H?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466RRLCXVKV%2F20250312%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250312T101734Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEHIaCXVzLXdlc3QtMiJGMEQCIFg3VsVvlwKG5T6DW6c%2BiGzO%2F4%2FgWXvgmwjgzsV19qcnAiAs0tDa7nFNYcsVReXt5DPXZ49PsSyYlsAB61j6muEsCCqIBAi7%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F8BEAAaDDYzNzQyMzE4MzgwNSIMykJNH0SuBzK%2B8TBFKtwD7sbelPMzFF%2BGEk0csvxYIKWsg21mjU%2Bp9G7S4tRBE8dlSkKIovVecsHzo9FPgfukH%2BsbSZA9zo0Z5P9mSTCtr7LobJNP1TSo232bmSpqG%2BjUave2GPj5Zm%2Bxr%2FJtXsS8lWq0aRjT9uNSCH4qlNGyXrjSIjOwAHZb534ro5XyezgHDCZ0TzVy4h85Dd6AyGVQPG65toCDZAoaKGxHv8nxslb%2BoHT6p2KxLAS47WCPzP4%2FWufn3HSuBoXyJ%2BksDYPxZ8eO5bJbFjEsbwrir7c6gSxXqVFX9NZuAe7f3898GZGV0fPngA8%2BRCG9ZGcoUhRZiPkzydjbr5go60LI9loVtdCC6MUlLQheXVIfWNG4C5GI9lhzZjnVpAjU26swnQEbV%2FeQ748LjLTypJf8%2FEf5%2BFqE3Acwkrn0Pw%2FFMWfLw3GaeFyZ%2F%2BpqupomhT0Osgy6t%2FnXy%2Bxu7IkmsHWz8XvfXivVz9%2FoEhXo6sTFFYULN1Gg2SWVm2UoKdxoVNgx3bj4VG4y%2BIOIoSxSEO3R%2BEd%2B%2B2JuR82ckRfmDmzta8elyE55L5A8Rml4ejX9%2FUhCbH1DpmT4ed5B%2BU1D5rRPfh3rVrbz%2F%2FDKQJLoFHgCMgYLqW5HTLRh1l%2BJtXB7Qzswhr7FvgY6pgEFxr9FyzAlJQnJ80Hk5FRd9ziVhtTyTYGdFzZ3VSO93rExyk%2FG1adUNSxy7r3%2Bhe3WRuyTY%2FUUt8aYR9cZEYBUk46TCBj3yJV%2Fml6YYJM1%2BAety0SOjqH3oSc4eapnSlqiDWHi4Yze2FYopYkPpYMSbRMm1OplpQA0arKzB8GuwPNbJfPr943uMx%2FMEjX5Nd6XTEVVNm2vUNT3zLSYIwJoOTDafW7lq&X-Amz-Signature=8de14eff8b52e5ad5b11c8cb7362090ea9fd8ac9337ceea6e353f7fe87c59b9a&X-Amz-SignedHeaders=host&x-id=GetObject)\n